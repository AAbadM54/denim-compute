



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Installing BACA - Denim Compute - A Cloud Pak for Automation reference implementation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Denim Compute - A Cloud Pak for Automation reference implementation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Denim Compute - A Cloud Pak for Automation reference implementation
            </span>
            <span class="md-header-nav__topic">
              
                Installing BACA
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/ibm-cloud-architecture/denim-compute/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Denim Compute - A Cloud Pak for Automation reference implementation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Denim Compute - A Cloud Pak for Automation reference implementation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/ibm-cloud-architecture/denim-compute/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Use case
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Use case
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../usecase/use-case-definition/" title="Use case definition" class="md-nav__link">
      Use case definition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Scenarios
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Scenarios
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../usecase/scenarios-intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usecase/resources/denim-compute-scenario-walkthrough.pdf" title="Main scenario walkthrough" class="md-nav__link">
      Main scenario walkthrough
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usecase/baca-scenario-walkthrough/" title="BACA scenario walkthrough" class="md-nav__link">
      BACA scenario walkthrough
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usecase/bai-scenario-walkthrough/" title="BAI scenario walkthrough" class="md-nav__link">
      BAI scenario walkthrough
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Environment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Environment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1" checked>
    
    <label class="md-nav__link" for="nav-3-1">
      OpenShift
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        OpenShift
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../rhos-intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rhos-create-cluster/" title="Create OCP cluster" class="md-nav__link">
      Create OCP cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rhos-install-odm/" title="Installing ODM" class="md-nav__link">
      Installing ODM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rhos-install-baw/" title="Installing BAW" class="md-nav__link">
      Installing BAW
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
    <a href="./" title="Installing BACA" class="md-nav__link md-nav__link--active">
      Installing BACA
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rhos-install-bai/" title="Installing BAI" class="md-nav__link">
      Installing BAI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rhos-install-cm/" title="Installing CM" class="md-nav__link">
      Installing CM
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Design
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Design
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../design/workflow/" title="Workflow" class="md-nav__link">
      Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../design/decisions/" title="Decisions" class="md-nav__link">
      Decisions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../design/insights/" title="Insights" class="md-nav__link">
      Insights
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../design/sundries/" title="Sundries" class="md-nav__link">
      Sundries
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Workflow
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        Workflow
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/workflow-intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/process-flow-control/" title="Process flow control" class="md-nav__link">
      Process flow control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/process-services/" title="Process services" class="md-nav__link">
      Process services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/process-user-interface/" title="Process user interface" class="md-nav__link">
      Process user interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/case-activities/" title="Case activities" class="md-nav__link">
      Case activities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/case-user-interface/" title="Case user interface" class="md-nav__link">
      Case user interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/bai-emulated-workflow/" title="Workflow for emulated BAI" class="md-nav__link">
      Workflow for emulated BAI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/decisions/" title="Decisions" class="md-nav__link">
      Decisions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/insights/" title="Insights" class="md-nav__link">
      Insights
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/capture/" title="Capture" class="md-nav__link">
      Capture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/sundries/" title="Sundries" class="md-nav__link">
      Sundries
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Showtime
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Showtime
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../showtime/deploy-solution/" title="Deploy" class="md-nav__link">
      Deploy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showtime/run-solution/" title="Run" class="md-nav__link">
      Run
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../references/" title="References" class="md-nav__link">
      References
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ibm-cloud-architecture/denim-compute/edit/master/docs/environment/rhos-install-baca.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Installing BACA</h1>
                
                <ul>
<li>
<p>Prepare your environment by following the instructions on <a href="https://github.com/icp4a/cert-kubernetes/blob/19.0.1/README.md">IBM Cloud Pak for Automation 19.0.1 on Certified Kubernetes</a>.
The instructions ask you to validate that you have the right version of Kubernetes, Helm, Kubernetes CLI and OpenShift container platform CLI installed on the machine that you are using for installation. Furthermore, the containers require access to database(s) and LDAP (if using LDAP). Ensure that the version of the database and LDAP are supported for IBM Cloud Pak for Automation version that you are installing.</p>
</li>
<li>
<p>Ensure that you have downloaded PPA package for the version of IBM Business Automation Content Analyzer you are planning to install. We used ICP4A19.0.1-baca.tgz to install IBM Business Automation Content Analyzer version 19.0.1.</p>
</li>
<li>
<p>Download the <a href="https://github.com/icp4a/cert-kubernetes/blob/19.0.1/scripts/loadimages.sh">loadimages.sh</a> script from GitHub.</p>
</li>
<li>
<p>Create an OpenShift project (namespace) where you want to install IBM Business Automation Content Analyzer version 19.0.1 and make the new project (namespace) the current project. To create new project use command <code>oc new-project &lt;projectname&gt;</code> where <code>&lt;projectname&gt;</code> is the name of the project for example <code>baca</code>.</p>
</li>
<li>
<p>Login to the OpenShift Docker registry following instructions in the <a href="../rhos-create-cluster/">Load the Cloud Pak images</a>.</p>
</li>
<li>
<p>Run the <code>loadimages.sh</code> script to tag and push the product container images into your Docker registry. Specify the two mandatory parameters in the command line that <code>loadimages.sh</code> script requires. The namespace is the <code>&lt;projectname&gt;</code> that you specified earlier. </p>
</li>
</ul>
<p><img alt="BACA options" src="../images/rhos-baca1.png" /></p>
<p>In the screen shot below, target docker registry is <code>docker-registry.default.svc:5000</code> and namespace is <code>denimcompute</code>.</p>
<p><img alt="BACA images 1" src="../images/rhos-baca2.png" /></p>
<ul>
<li>IBM BACA 19.0.1 consists of 17 images and the <code>loadimages.sh</code> script lists all the images that it uploads to the Docker registry on successful completion.</li>
</ul>
<p><img alt="BACA images 2" src="../images/rhos-baca3.png" /></p>
<ul>
<li>
<p>Prepare environment for IBM Business Automation Content Analyzer. See <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.install/k8s_topics/tsk_prepare_bacak8s.html">Preparing to install automation containers on Kubernetes</a>. These procedures include setting up databases, LDAP, storage, and configuration files that are required for use and operation.</p>
</li>
<li>
<p>If you are using LDAP for authentication, BACA users need to be configured on the LDAP server. An initial user is created in IBM Business Automation Content Analyzer when first creating the Db2 database. The user name must match the LDAP user name when specified. If LDAP is not used for authentication, pre-setup of users is not required. Refer to <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.install/k8s_topics/tsk_prepare_bacak8s_usergroups.html">Preparing users for IBM Business Automation Content Analyzer</a> for more information.</p>
</li>
<li>
<p>If you do not have a DB2 database, set up a new DB2 environment. Download database scripts from <a href="https://github.com/icp4a/cert-kubernetes/tree/19.0.1/BACA/configuration/DB2">this GitHub repo</a>. Refer to <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.install/k8s_topics/tsk_prepare_bacak8s_db.html">Creating and Configuring a DB2 database</a> for more information.</p>
</li>
<li>
<p>Log into DB2 instance using DB2 instance administrator id such as db2inst1 (refer the section <a href="../rhos-create-cluster/">Setup DB2</a>.</p>
</li>
<li>
<p>Set up the base database by running the following command:</p>
</li>
</ul>
<pre><code>./CreateBaseDB.sh.
</code></pre>

<p>Enter the following details:</p>
<ul>
<li>Name of the IBM Business Automation Content Analyzer Base database - (enter a unique name of 8 characters or less and no special characters).</li>
<li>Name of database user - (enter a database user name) - can be a new or existing Db2 user.</li>
<li>Password for the user - (enter a password) - each time when prompted. If it is an existing user, the prompt is skipped</li>
</ul>
<p>Enter <code>Y</code> when you are asked <code>Would you like to continue (Y/N):</code></p>
<p><img alt="BACA DB 1" src="../images/rhos-baca4.png" />
<img alt="BACA DB 2" src="../images/rhos-baca5.png" />
<img alt="BACA DB 3" src="../images/rhos-baca6.png" />
<img alt="BACA DB 4" src="../images/rhos-baca7.png" /></p>
<ul>
<li>Create the tenant database by following <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.install/k8s_topics/tsk_prepare_bacak8s_db.html">these instructions</a>. Once the tenant database is created and populated with initial content, the tenant id and ontology is displayed (see screen shots below).</li>
</ul>
<p><img alt="BACA tenant 1" src="../images/rhos-baca8.png" />
<img alt="BACA tenant 2" src="../images/rhos-baca9.png" />
<img alt="BACA tenant 3" src="../images/rhos-baca10.png" /></p>
<ul>
<li>External storage is needed in the content services environment. You set up and configure storage to prepare for the container configuration and deployment. Follow instructions at <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.install/k8s_topics/tsk_prepare_bacak8s_storage.html">Configuring storage for the Business Automation Content Analyzer environment</a> to create persistent volumes (PV) and persistent volume claims (PVC). The screen below shows pv and pvc created in project <code>&lt;projectname&gt;</code> (for example<code>baca</code>) created earlier.</li>
</ul>
<p><img alt="BACA PV" src="../images/rhos-baca11.png" /></p>
<ul>
<li>You need to create SSL certificates and secrets before you install via Helm chart. You can run the <code>init_deployment.sh</code> script provided <a href="https://github.com/icp4a/cert-kubernetes/tree/19.0.1/BACA/configuration/">here</a> to create SSL certificates and secrets.
The <code>init_deployment.sh</code> scripts requires you to populate parameters in common.sh file. Use common_OCP_template.sh as basis for <code>common.sh</code> to be used for installation on OpenShift.
Information on populating the parameters in <code>common.sh</code> can be found at <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.ref/topics/ref_baca_common_params.html">Prerequisite install parameters</a>.
The screen shot below captures <code>common.sh</code> that we used in our installation process. Please note that we selected <code>PVCCHOICE</code> as <code>2</code> as we created, persistent volumes and persistent volume claims manually in the earlier step. Furthermore, please set <code>HELM_INIT_BEFORE</code> as <code>Y</code> as Helm has been installed earlier and we do not want to install Helm as part of running <code>init_deployment.sh</code> script.</li>
</ul>
<p><img alt="BACA pre-reqs" src="../images/rhos-baca12.png" /></p>
<ul>
<li>Run <code>./init_deployment.sh</code> so that it creates SSL certificates and secrets required for Content Analyzer. <blockquote>
<p>Please note the <code>init_deployment.sh</code> uses <code>loginToCluster</code> function in <code>bashfunctions.sh</code> to log into OpenShift cluster.</p>
<ul>
<li>The <code>loginToCluster</code> function assumes that Kubernetes API server is exposed on port <code>8443</code> and also requires user id and password to log into the cluster.
If you are using Managed OpenShift cluster on IBM Cloud then this assumption is not valid. Thus, you will have to modify the function to use login command copied from OpenShift web console.</li>
<li>Copy login command is available as drop down in upper right corner of OpenShift web console and update <code>loginToCLuster</code> function with the copied command.</li>
</ul>
</blockquote>
</li>
</ul>
<p>Please make sure that before you run the script, the OpenShift project that you created earlier is the current project. If it is not, make it a current project using the command <code>oc project &lt;projectname&gt;</code>. </p>
<p><img alt="BACA deploy 1" src="../images/rhos-baca13.png" />
<img alt="BACA deploy 2" src="../images/rhos-baca14.png" /></p>
<ul>
<li>Validate the objects created by running  the following commands. To check secrets, run the following command:</li>
</ul>
<pre><code>kubectl -n &lt;projectname&gt; get secrets
</code></pre>

<p>or</p>
<pre><code>oc get secrets
</code></pre>

<p><img alt="BACA verify" src="../images/rhos-baca15.png" /></p>
<ul>
<li>
<p>Verify that 9 secrets were created (7 if not using LDAP or ingress). Refer to <a href="https://github.com/icp4a/cert-kubernetes/blob/19.0.1/BACA/docs/init_deployment.md">Create PVs, PVCs, certificates and secrets using init_deployment.sh</a> for more information.</p>
</li>
<li>
<p>Run <code>./generateMemoryValues.sh &lt;limited&gt;</code> or <code>./generateMemoryValues.sh &lt;distributed&gt;</code>. For smaller system (5 worker-nodes or less) where the Mongo database pods will be on the same worker node as other pods, use limited option.</p>
</li>
</ul>
<p><img alt="BACA memory" src="../images/rhos-baca16.png" /></p>
<ul>
<li>
<p>Copy these values for replacement in the <code>values.yaml</code> file if you want to deploy CA using Helm chart or replacing these values in the <code>ca-deploy.yml</code> file if you want to deploy CA using kubernetes YAML files. Refer to <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.install/topics/tsk_preparing_baca_deploy_limitram.html">Limiting the amount of available memory</a> for more information.</p>
</li>
<li>
<p>Download the <a href="https://github.com/icp4a/cert-kubernetes/tree/19.0.1/BACA/helm-charts">Helm Chart</a>. Extract the helm chart from <code>ibm-dba-prod-1.0.0.tgz</code> and copy to the <code>ibm-dbamc-baca-prod</code> directory.</p>
</li>
<li>
<p>Edit the <code>values.yaml</code> file to populate configuration parameters. Go through the <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.ref/topics/ref_baca_globaloptions_params.html">Helm Chart configuration parameters section</a> and <a href="https://github.com/icp4a/cert-kubernetes/blob/19.0.1/BACA/docs/values_yaml_parameters.md">populating <code>values.yaml</code> with correct values</a> for options with the parameters and values.
Note that anything not documented here typically does not need to be changed.</p>
</li>
<li>
<p>After the <code>values.yaml</code> is filled out properly, you can proceed to deploy Content Analyzer with the Helm chart. However, before you run helm, the Tiller server will need at least "edit" access to each project where it will manage applications. In the case that Tiller will be handling Charts containing Role objects, <em>admin</em> access will be needed. Refer to <a href="https://blog.openshift.com/getting-started-helm-openshift/">Getting started with Helm on OpenShift</a> for more information. Run the command <code>oc policy add-role-to-user edit "system:serviceaccount:${TILLER_NAMESPACE}:tiller"</code> to grant the Tiller edit access to the project.</p>
</li>
</ul>
<p><img alt="Tiller permission" src="../images/rhos-baca17.png" /></p>
<ul>
<li>To deploy Content Analyzer, from the <code>ibm-dba-baca-prod</code> directory run:</li>
</ul>
<pre><code>$ helm install . --name celery&lt;projectname&gt; -f values.yaml  --namespace &lt;projectname&gt; --tiller-namespace tiller
</code></pre>

<p>where <code>&lt;projectname&gt;</code> is the name of the project you created earlier.
Due to the configuration of the readiness probes, after the pods start, it may take up to 10 or more minutes before the pods enter a ready state. Refer to <a href="https://github.com/icp4a/cert-kubernetes/blob/19.0.1/BACA/helm-charts/README.md">Deploying with Helm charts</a> for more information.</p>
<p><img alt="BACA deploy" src="../images/rhos-baca18.png" /></p>
<ul>
<li>Once all the pods are running, complete the post deployments steps listed <a href="https://github.com/icp4a/cert-kubernetes/blob/19.0.1/BACA/docs/post-deployment.md">here</a>.</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../rhos-install-baw/" title="Installing BAW" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Installing BAW
              </span>
            </div>
          </a>
        
        
          <a href="../rhos-install-bai/" title="Installing BAI" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Installing BAI
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>