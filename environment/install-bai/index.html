



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Installing BAI - Denim Compute - A Cloud Pak for Automation reference implementation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#installing-the-bpmn-event-emitter" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Denim Compute - A Cloud Pak for Automation reference implementation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Denim Compute - A Cloud Pak for Automation reference implementation
            </span>
            <span class="md-header-nav__topic">
              
                Installing BAI
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/ibm-cloud-architecture/denim-compute/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Denim Compute - A Cloud Pak for Automation reference implementation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Denim Compute - A Cloud Pak for Automation reference implementation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/ibm-cloud-architecture/denim-compute/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Use case
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Use case
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../usecase/use-case-definition/" title="Use case definition" class="md-nav__link">
      Use case definition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usecase/resources/denim-compute-scenario-walkthrough.pdf" title="Scenario walkthrough" class="md-nav__link">
      Scenario walkthrough
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Environment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Environment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../create-vms/" title="Creating VMs" class="md-nav__link">
      Creating VMs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Platform install
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Platform install
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../install-icp/" title="IBM Cloud Private" class="md-nav__link">
      IBM Cloud Private
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-openshift/" title="RedHat OpenShift" class="md-nav__link">
      RedHat OpenShift
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-cam/" title="Installing CAM" class="md-nav__link">
      Installing CAM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-baw/" title="Installing BAW" class="md-nav__link">
      Installing BAW
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Installing BAI
      </label>
    
    <a href="./" title="Installing BAI" class="md-nav__link md-nav__link--active">
      Installing BAI
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-the-bpmn-event-emitter" title="Installing the BPMN event emitter" class="md-nav__link">
    Installing the BPMN event emitter
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-the-enablebai-script" title="Run the EnableBAI script" class="md-nav__link">
    Run the EnableBAI script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-secure-connection-to-ibm-event-streams" title="Prepare secure connection to IBM Event Streams" class="md-nav__link">
    Prepare secure connection to IBM Event Streams
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-secure-connection-for-bpm-event-emitter" title="Prepare secure connection for BPM event emitter" class="md-nav__link">
    Prepare secure connection for BPM event emitter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-the-connection-to-bai" title="Test the connection to BAI" class="md-nav__link">
    Test the connection to BAI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-case-event-emitter" title="Installing the Case event emitter" class="md-nav__link">
    Installing the Case event emitter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-odm-event-emitter" title="Installing the ODM event emitter" class="md-nav__link">
    Installing the ODM event emitter
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sundries/" title="Sundries" class="md-nav__link">
      Sundries
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Design
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Design
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../design/workflow/" title="Workflow" class="md-nav__link">
      Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../design/decisions/" title="Decisions" class="md-nav__link">
      Decisions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../design/insights/" title="Insights" class="md-nav__link">
      Insights
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../design/sundries/" title="Sundries" class="md-nav__link">
      Sundries
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Workflow
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        Workflow
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/workflow-intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/process-flow-control/" title="Process flow control" class="md-nav__link">
      Process flow control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/process-services/" title="Process services" class="md-nav__link">
      Process services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/process-user-interface/" title="Process user interface" class="md-nav__link">
      Process user interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/case-activities/" title="Case activities" class="md-nav__link">
      Case activities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/case-user-interface/" title="Case user interface" class="md-nav__link">
      Case user interface
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/decisions/" title="Decisions" class="md-nav__link">
      Decisions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/sundries/" title="Sundries" class="md-nav__link">
      Sundries
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Showtime
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Showtime
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../showtime/deploy-solution/" title="Deploy" class="md-nav__link">
      Deploy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showtime/run-solution/" title="Run" class="md-nav__link">
      Run
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../references/" title="References" class="md-nav__link">
      References
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-the-bpmn-event-emitter" title="Installing the BPMN event emitter" class="md-nav__link">
    Installing the BPMN event emitter
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-the-enablebai-script" title="Run the EnableBAI script" class="md-nav__link">
    Run the EnableBAI script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-secure-connection-to-ibm-event-streams" title="Prepare secure connection to IBM Event Streams" class="md-nav__link">
    Prepare secure connection to IBM Event Streams
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-secure-connection-for-bpm-event-emitter" title="Prepare secure connection for BPM event emitter" class="md-nav__link">
    Prepare secure connection for BPM event emitter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-the-connection-to-bai" title="Test the connection to BAI" class="md-nav__link">
    Test the connection to BAI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-case-event-emitter" title="Installing the Case event emitter" class="md-nav__link">
    Installing the Case event emitter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-odm-event-emitter" title="Installing the ODM event emitter" class="md-nav__link">
    Installing the ODM event emitter
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ibm-cloud-architecture/denim-compute/edit/master/docs/environment/install-bai.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Installing BAI</h1>
                
                <p>This chapter details the install activities for the BAI component and the associated emitters for BPMN, BPEL, Case Management and ODM.</p>
<h2 id="installing-the-bpmn-event-emitter">Installing the BPMN event emitter</h2>
<p>This section provides a playback of the <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.bai/topics/con_bai_top_bpmn_emitter_install_config.html">IBM Knowledge Center BAW emitter install documentation</a> steps.
Before starting on your install, make sure you have the following node information available:</p>
<ul>
<li>IBM Event Streams bootstrap host IP and port (e.g. <code>172.16.52.216:32254</code>)</li>
<li>IBM Event Streams broker-[0..n] host and port</li>
<li>IBM Event Streams topicName, e.g. <code>event-streams-test1-ibm-bai-ingress</code></li>
<li>IBM Event Streams console URL</li>
<li>BAI Kibana UI URL</li>
</ul>
<p>You will also need the credentials for the BPM deployment environment administrator.
Next, check the install prerequisites, which are listed <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.bai/topics/tsk_bai_bpmn_emitter_install_prereq.html">here</a>.</p>
<h3 id="run-the-enablebai-script">Run the EnableBAI script</h3>
<p>The documentation instructions for this task are <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.bai/topics/tsk_bai_bpmn_emitter_first_install_config.html">here</a>. The first step is to install the emitter application and create a set of JMS resources. Log in to the BAW deployment manager node and run the <code>EnableBAI.py</code> script. You will need to use the BPM deployment environment administrator credentials to run the script.</p>
<pre><code>cd /opt/IBM/BPM
./profiles/DmgrProfile/bin/wsadmin.sh -f ./BPM/Lombardi/tools/def/EnableBAI.py -enable
</code></pre>

<p>You should see the following output:</p>
<pre><code>ADMA5016I: Installation of BPMEventEmitter_war_De1 started.
ADMA5058I: Application and module versions are validated with versions of deployment targets.
ADMA5005I: The application BPMEventEmitter_war_De1 is configured in the WebSphere Application Server repository.
ADMA5005I: The application BPMEventEmitter_war_De1 is configured in the WebSphere Application Server repository.
ADMA5081I: The bootstrap address for client module is configured in the WebSphere Application Server repository.
ADMA5053I: The library references for the installed optional package are created.
ADMA5005I: The application BPMEventEmitter_war_De1 is configured in the WebSphere Application Server repository.
ADMA5001I: The application binaries are saved in /opt/IBM/BPM/profiles/DmgrProfile/wstemp/Script16bb8535ebd/workspace/cells/PCCell1/applications/BPMEventEmitter_war_De1.ear/BPMEventEmitter_war_De1.ear
ADMA5005I: The application BPMEventEmitter_war_De1 is configured in the WebSphere Application Server repository.
SECJ0400I: Successfully updated the application BPMEventEmitter_war_De1 with the appContextIDForSecurity information.
ADMA5005I: The application BPMEventEmitter_war_De1 is configured in the WebSphere Application Server repository.
ADMA5005I: The application BPMEventEmitter_war_De1 is configured in the WebSphere Application Server repository.
ADMA5113I: Activation plan created successfully.
ADMA5011I: The cleanup of the temp directory for application BPMEventEmitter_war_De1 is complete.
ADMA5013I: Application BPMEventEmitter_war_De1 installed successfully.
Saving Configuration
Class loader order is changed to 'classes loaded with local class loader first'.
Connection update skipped
---------------------------------------------------------------
 AdminNodeManagement:        Synchronize the active nodes
 Usage: AdminNodeManagement.syncActiveNodes()
 Return: If the command is successfully invoked, a value of 1 is returned.
---------------------------------------------------------------

Node1
Node2
Configuration synchronized.
</code></pre>

<p>After the script execution completes, you will have:</p>
<ul>
<li>
<p>The <code>BPMEventEmitter</code> application installed:
<img alt="BPM Emitter Application" src="../images/bpm-event-emitter-app.png" /></p>
</li>
<li>
<p>The <code>monitorCF</code> connection factory created:
<img alt="MonitorCF" src="../images/monitor-cf.png" /></p>
</li>
<li>
<p>The <code>monitorQueue</code> created:
<img alt="monitorQueue" src="../images/monitor-queue.png" /></p>
</li>
<li>
<p>The <code>defAS</code> activation spec is created:
<img alt="defAS" src="../images/activation-spec.png" /></p>
</li>
</ul>
<p>Once the script completes, you need to restart BAW. This step may take a while: the deployment manager node may be slow to stop, restart and communicate with the BAW cluster members.</p>
<h3 id="prepare-secure-connection-to-ibm-event-streams">Prepare secure connection to IBM Event Streams</h3>
<p>The documentation instructions for this task are <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.install/topics/tsk_preparing_bai_using_event_streams.html#task_amz_qsx_kfb">here</a>. The steps are the following:</p>
<ul>
<li>Generate the API key</li>
<li>Log in to the IBM Event Stream console as administrator.</li>
<li>Connect to the cluster:
<img alt="Connect to cluster" src="../images/event-streams-cluster-connection.png" /></li>
<li>Download the truststore and PEM certificate as shown below:
<img alt="Certificates" src="../images/event-streams-certs.png" /></li>
<li>Copy the truststore (e.g. <code>es-cert.jks</code> file) and PEM certificate (e.g. <code>es-cert.pem</code> file) in a folder (e.g. <code>/opt/IBM/BPM/EventStreamKeyStore</code>) on the deployment manager node</li>
<li>Import the certificates on the deployment manager by running the following command:</li>
</ul>
<pre><code>/opt/IBM/BPM/java/bin/keytool -importcert -alias kafkaServer -keystore es-cert.jks -file es-cert.pem -noprompt
</code></pre>

<h3 id="prepare-secure-connection-for-bpm-event-emitter">Prepare secure connection for BPM event emitter</h3>
<p>Documentation instructions for this task are <a href="https://www.ibm.com/support/knowledgecenter/SSYHZ8_19.0.x/com.ibm.dba.bai/topics/tsk_bai_bpmn_emitter_config.html">here</a>. The steps are the following:</p>
<ul>
<li>Edit the configuration property file <code>/opt/IBM/BPM/BPM/Lombardi/tools/def/BAIConfigure.properties</code></li>
<li><code>DeploymentEnvironmentName</code> is set to <code>None</code> as we only have one DE</li>
<li><code>bootstrapServer</code>s is set to the Event Stream bootstrap and 3 boot servers IP/port</li>
<li><code>topicName</code> is set to the kafka ingress topic that was configured when installing BAI</li>
<li><code>bpmCellName</code> is set to the name of the BAW BPM cell</li>
<li><code>type</code> is set to <code>plain_ssl</code> as this is the security configure by default on IBM Event Streams</li>
<li><code>trustStore</code> is set to the location of the trust store downloaded from IBM Event Stream</li>
<li><code>trustStore.password</code> is set to the IBM Event Stream trust store password</li>
<li><code>username</code> is set to <code>token</code></li>
<li><code>password</code> is set to the API key generated from IBM Event Streams
Below is an example of the configuration file:</li>
</ul>
<pre><code>DeploymentEnvironmentName=None
bootstrapServers=172.16.52.216:32254,172.16.52.216:31027,172.16.52.216:31571,172.16.52.216:30457
topicName=event-streams-test1-ibm-bai-ingress
bpmCellName=PCCell1

type=plain_ssl
# SSL
trustStore=/opt/IBM/BPM/EventStreamKeyStore/es-cert.jks
trustStore.password=password
# Authentication
username=token
password=gbSA_jxUBeoVyqmvdoZvePoPWS_W1SaHOKmuQCk-xH93
</code></pre>

<ul>
<li>Run the EnableBAI configuration script again as follows:</li>
</ul>
<pre><code>cd /opt/IBM/BPM
./profiles/DmgrProfile/bin/wsadmin.sh -f ./BPM/Lombardi/tools/def/EnableBAI.py --update=connection --property=./BPM/Lombardi/tools/def/BAIConfigure.properties
</code></pre>

<ul>
<li>Start the BPM event emitter application. The log should show the following:</li>
</ul>
<pre><code>[7/3/19 12:22:01:913 EDT] 000000a4 ConfigConnect I   CWMCD1003I: The Kafka connection is created.
[7/3/19 12:22:01:915 EDT] 000000a4 LifeCycleMana I   CWMCD1014I: The BPMEventEmitter message-driven bean (MDB) is started.
[7/3/19 12:22:01:936 EDT] 000000a4 ApplicationMg A   WSVR0221I: Application started: BPMEventEmitter_war_De1
[7/3/19 12:22:01:937 EDT] 000000a4 CompositionUn A   WSVR0191I: Composition unit WebSphere:cuname=BPMEventEmitter_war_De1 in BLA WebSphere:blaname=BPMEventEmitter_war_De1 started.
</code></pre>

<h3 id="test-the-connection-to-bai">Test the connection to BAI</h3>
<p>Test the install by running sample processes from the process portal. You should see the <code>Workflow - Processes</code> default dashboard in Kibana being updated, as shown below:</p>
<p><img alt="BPM Kibana dashboard" src="../images/bpm-kibana-dashboard.png" /></p>
<h2 id="installing-the-case-event-emitter">Installing the Case event emitter</h2>
<p><em>TBD</em></p>
<h2 id="installing-the-odm-event-emitter">Installing the ODM event emitter</h2>
<p>Unlike for an on-prem install, where you have to manually configure the ODM emitter install, the emitter for ODM is installed as part of the ODM containers deployment through IBACC. You will need to have handy the information shown on the screen shot below during the ODM deployment.</p>
<p><img alt="ODM emitter install" src="../images/odm-emitter.png" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../install-baw/" title="Installing BAW" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Installing BAW
              </span>
            </div>
          </a>
        
        
          <a href="../sundries/" title="Sundries" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Sundries
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>